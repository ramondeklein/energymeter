(function(){var a;a=angular.module("energyMonitor",["ngRoute"]),a.config(["$routeProvider",function(a){return a.when("/",{templateUrl:"/views/chart.html"}).otherwise({redirectTo:"/"})}])}).call(this),function(){var a;a=angular.module("energyMonitor"),a.service("ReadingService",["$http","$q",function(a,b){var c;return c="http://localhost:8888",{getMeters:function(){var d;return d=b.defer(),a.get(""+c+"/api/v1/meter").success(function(a){return d.resolve(a.meters)}).error(function(){return d.reject("Unable to obtain the meters.")}),d.promise},getPulses:function(d,e,f){var g,h;return g=b.defer(),h={},e&&(h.start=e),f&&(h.end=f),a.get(""+c+"/api/v1/pulses/"+d,{params:h}).success(function(a){return g.resolve(a)}).error(function(){return g.reject("Unable to obtain the meter pulses.")}),g.promise},getPulsesByDuration:function(d,e,f,g){var h,i;return h=b.defer(),i={},f&&(i.start=f),g&&(i.end=g),a.get(""+c+"/api/v1/duration/"+d+"/"+e,{params:i}).success(function(a){return h.resolve(a)}).error(function(){return h.reject("Unable to obtain the meter pulses per duration.")}),h.promise}}}])}.call(this),function(){var a;a=angular.module("energyMonitor"),a.controller("EnergyChartController",["$scope","ReadingService",function(a,b){var c;return a.duration=60,a.period={start:null,end:null},Highcharts.setOptions({global:{useUTC:!1}}),c=new Highcharts.StockChart({chart:{renderTo:"container"},navigator:{adaptToUpdatedData:!1},title:{text:"Energy overview (times in UTC)"}}),b.getMeters().then(function(d){var e,f,g,h,i;for(e=function(d){var e;return e=c.addSeries({name:d.description}),b.getPulsesByDuration(d.id,a.duration,a.period.start,a.period.end).then(function(b){return e.setData(b.data),(!a.period.start||b.start<a.period.start)&&(a.period.start=b.start),!a.period.end||b.end>a.period.end?a.period.end=b.end:void 0})},i=[],g=0,h=d.length;h>g;g++)f=d[g],i.push(e(f));return i})}])}.call(this),angular.module("energyMonitor").run(["$templateCache",function(a){"use strict";a.put("/views/chart.html",'<div ng-controller=EnergyChartController><div id=container style="width: 100%; height: 400px"></div></div>')}]);